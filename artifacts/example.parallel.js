!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports["parallel-es"]=r():e["parallel-es"]=r()}(this,function(){return webpackJsonpparallel_es([1],{171:function(e,r,t){"use strict";function n(e){for(;d.rows.length>1;)d.deleteRow(1);var r=!0,t=!1,n=void 0;try{for(var a,i=o()(e);!(r=(a=i.next()).done);r=!0){var u=a.value,l=d.insertRow();l.insertCell().innerText=u.project.startYear.toLocaleString(),l.insertCell().innerText=u.project.totalAmount.toLocaleString();for(var c=["green","yellow","gray","red"],s=function(){var e=c[m],r=u.groups.find(function(r){return r.name===e});l.insertCell().innerText=r?(100*r.percentage).toFixed(2):"-"},m=0;m<c.length;m++)s()}}catch(f){t=!0,n=f}finally{try{!r&&i["return"]&&i["return"]()}finally{if(t)throw n}}}var a=t(4),o=t.n(a),i=t(26),u=t(27),l=t(25),c=document.querySelector("#mandelbrot-canvas"),s=c.getContext("2d"),m=t.i(i.a)(c.width,c.height,1e4),f={investmentAmount:62e4,numRuns:1e4,numYears:15,performance:.034,projects:[{startYear:0,totalAmount:1e4},{startYear:1,totalAmount:1e4},{startYear:2,totalAmount:1e4},{startYear:5,totalAmount:5e4},{startYear:15,totalAmount:8e5}],seed:10,volatility:.0896},d=document.querySelector("#montecarlo-table");document.querySelector("#mandelbrot-run-async").addEventListener("click",function(e){e.preventDefault(),s.putImageData(s.createImageData(c.width,c.height),0,0);var r=parseInt(document.querySelector("#mandelbrot-values-per-task").value,10);console.time("mandelbrot-async"),t.i(i.b)(m,{maxValuesPerTask:r}).subscribe(function(e,r,t){for(var n=0;n<e.length;++n)s.putImageData(new ImageData(e[n],c.width,1),0,r*t+n)}).then(function(){return console.timeEnd("mandelbrot-async")},function(e){return console.error(e)})}),document.querySelector("#mandelbrot-run-sync").addEventListener("click",function(){s.putImageData(s.createImageData(c.width,c.height),0,0),setTimeout(function(){console.time("mandelbrot-sync"),t.i(i.c)(m,function(e,r){s.putImageData(new ImageData(e,c.width,1),0,r)}),console.timeEnd("mandelbrot-sync")},0)}),document.querySelector("#montecarlo-run-sync").addEventListener("click",function(){console.time("montecarlo-sync");var e=t.i(u.a)(f);console.timeEnd("montecarlo-sync"),n(e),console.log(e)}),document.querySelector("#montecarlo-run-parallel").addEventListener("click",function(){console.time("montecarlo-parallel"),t.i(u.b)(f).then(function(e){console.timeEnd("montecarlo-parallel"),n(e),console.log(e)})});var v=document.querySelector("#knight-board-result");document.querySelector("#knight-run-sync").addEventListener("click",function(){var e=parseInt(document.querySelector("#knight-board-size").value,10);v.innerText="Calculating...",setTimeout(function(){console.time("knight-run-sync");var r=t.i(l.a)({x:0,y:0},e);console.timeEnd("knight-run-sync"),v.innerText="Found "+r+" solutions for "+e+"x"+e+" board"},0)}),document.querySelector("#knight-run-parallel").addEventListener("click",function(){var e=parseInt(document.querySelector("#knight-board-size").value,10);v.innerText="Calculating...",console.time("knight-run-parallel"),t.i(l.b)({x:0,y:0},e).then(function(r){console.timeEnd("knight-run-parallel"),v.innerText="Found "+r+" solutions for "+e+"x"+e+" board"},function(e){return console.log(e)})})},25:function(e,r,t){"use strict";function n(e){var r=new Array(e*e);return r.fill(0),{board:r,boardSize:e}}function a(e,r){for(var t=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],n=r.boardSize,a=r.board,o=n*n,i=0,u=e.map(function(e,r){return{coordinate:e,n:r+1}}),l=0;l<e.length-1;++l){var c=e[l].x*n+e[l].y;a[c]=l+1}for(;u.length>0;){var s=u[u.length-1],m=s.coordinate,f=s.n,d=m.x*n+m.y;if(0===a[d])if(f!==o){a[d]=f;for(var v=0;v<t.length;++v){var y=t[v],h={x:m.x+y.x,y:m.y+y.y},p=h.x>=0&&h.y>=0&&h.x<n&&h.y<n&&0===a[h.x*n+h.y];p&&u.push({coordinate:h,n:f+1})}}else++i,u.pop();else a[d]=0,u.pop()}return i}function o(e,r){var t=n(r);return a([e],t)}function i(e,r,t){function o(t){var n=[{x:-2,y:-1},{x:-2,y:1},{x:-1,y:-2},{x:-1,y:2},{x:1,y:-2},{x:1,y:2},{x:2,y:-1},{x:2,y:1}],a=[],o=!0,i=!1,u=void 0;try{for(var c,s=l()(n);!(o=(c=s.next()).done);o=!0){var m=c.value,f={x:t.x+m.x,y:t.y+m.y},d=f.x>=0&&f.y>=0&&f.x<r&&f.y<r&&(f.x!==e.x||f.y!==e.y)&&f.x!==t.x&&f.y!==t.y;d&&a.push(f)}}catch(v){i=!0,u=v}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw u}}return a}function i(){var r=[],t=!0,n=!1,a=void 0;try{for(var i,u=l()(o(e));!(t=(i=u.next()).done);t=!0){var c=i.value,s=!0,m=!1,f=void 0;try{for(var d,v=l()(o(c));!(s=(d=v.next()).done);s=!0){var y=d.value;r.push([e,c,y])}}catch(h){m=!0,f=h}finally{try{!s&&v["return"]&&v["return"]()}finally{if(m)throw f}}}}catch(h){n=!0,a=h}finally{try{!t&&u["return"]&&u["return"]()}finally{if(n)throw a}}return r}var u=0,s=performance.now();return c["default"].from(i(),t).inEnvironment(n,r).map(a).reduce(0,function(e,r){return e+r}).subscribe(function(e){var r=!0,t=!1,n=void 0;try{for(var a,o=l()(e);!(r=(a=o.next()).done);r=!0){var i=a.value;u+=i}}catch(c){t=!0,n=c}finally{try{!r&&o["return"]&&o["return"]()}finally{if(t)throw n}}console.log(u/(performance.now()-s)*1e3+" results per second")})}var u=t(4),l=t.n(u),c=t(6);r.a=o,r.b=i},26:function(e,r,t){"use strict";function n(e,r,t){var n={i:-1.2,real:-2},a={i:0,real:1};a.i=n.i+(a.real-n.real)*r/e;var o={i:(a.i-n.i)/(r-1),real:(a.real-n.real)/(e-1)};return{imageHeight:r,imageWidth:e,iterations:t,max:a,min:n,scalingFactor:o}}function a(e,r){function t(e){for(var t={i:e.i,real:e.real},n=0;n<r.iterations&&!(Math.pow(t.real,2)+Math.pow(t.i,2)>4);++n){var a=t.i;t.i=2*t.real*t.i+e.i,t.real=Math.pow(t.real,2)-Math.pow(a,2)+e.real}return{z:t,n:n}}for(var n=new Uint8ClampedArray(4*r.imageWidth),a=r.max.i-e*r.scalingFactor.i,o=0;o<r.imageWidth;++o){var i={i:a,real:r.min.real+o*r.scalingFactor.real},u=t(i),l=u.n,c=4*o;n[c]=255&l,n[c+1]=65280&l,n[c+2]=16711680&l,n[c+3]=255}return n}function o(e,r){return u["default"].range(0,e.imageHeight,1,r).inEnvironment(e).map(a)}function i(e,r){for(var t=0;t<e.imageHeight;++t){var n=a(t,e);r(n,t)}}var u=t(6);r.a=n,r.b=o,r.c=i},27:function(e,r,t){"use strict";function n(e){return m()({},{investmentAmount:1e6,liquidity:1e4,numRuns:1e4,numYears:10,performance:0,projects:[],seed:void 0,volatility:.01},e)}function a(e){function r(r,t){function n(t){for(var n=e.investmentAmount,a=100,o=0;o<t.length;++o){var i=t[o],u=0===o?0:r[o-1],l=i/a;n=(n+u)*l,t[o]=Math.round(n),a=i}return t}for(var a=new Array(e.numYears),o=0;o<=t;++o)a[o]=new Array(e.numRuns);for(var i=0;i<e.numRuns;i++){for(var u=[100],l=1;l<=t;l++){var c=1+Math.random();u.push(u[l-1]*c)}n(u);for(var s=0;s<u.length;++s)a[s][i]=u[s]}return a}function t(){for(var r=[],t=0;t<e.numYears;++t){var n=i[t]||[],a=-n.reduce(function(e,r){return e+r.totalAmount},0);r.push(a)}return r}function n(r){for(var t=[],n=e.investmentAmount,a=0;a<e.numYears;++a)n+=r[a],t.push(n);return t}var a=e.projects;e.taskIndex&&e.valuesPerWorker&&(a=e.projects.slice(e.taskIndex*e.valuesPerWorker,(e.taskIndex+1)*e.valuesPerWorker));for(var o=e.projects.sort(function(e,r){return e.startYear-r.startYear}),i={},u=0;u<o.length;++u){var l=o[u],c=i[l.startYear]=i[l.startYear]||[];c.push(l)}var s=t(),m=n(s),f=a.reduce(function(e,r){return Math.max(e,r.startYear)},0);return{investmentAmount:e.investmentAmount,liquidity:e.liquidity,noInterestReferenceLine:m,numRuns:e.numRuns,numYears:f,projectsByStartYear:i,simulatedValues:r(s,f)}}function o(e,r){function t(e,r){return r.find(function(r){return("undefined"==typeof r.from||r.from<=e)&&("undefined"==typeof r.to||r.to>e)})}function n(e,t){return[{description:"Ziel erreichbar",from:e,name:"green",percentage:0,separator:!0},{description:"mit Zusatzliquidit√§t erreichbar",from:e-r.liquidity,name:"yellow",percentage:0,separator:!0,to:e},{description:"nicht erreichbar",from:t,name:"gray",percentage:0,separator:!1,to:e-r.liquidity},{description:"nicht erreichbar, mit Verlust",name:"red",percentage:0,separator:!1,to:t}]}function a(){for(var t=e.totalAmount,n=r.projectsByStartYear[e.startYear],a=0;a<n.length;++a){var o=n[a];if(o===e)break;t+=o.totalAmount}return t}function o(e){var r=Math.floor(e.length/2);return e.length%2?e[r]:(e[r-1]+e[r])/2}var i=10,u=a(),l=r.simulatedValues[e.startYear];l.sort(function(e,r){return e-r});for(var c=n(u,r.noInterestReferenceLine[e.startYear]),s={},m=Math.round(l.length/i),f=[],d=0;d<l.length;d+=m){for(var v={max:Number.MIN_VALUE,min:Number.MAX_VALUE,subBuckets:{}},y=d;y<d+m;++y){var h=l[y];v.min=Math.min(v.min,h),v.max=Math.max(v.max,h);var p=t(l[y],c);s[p.name]=(s[p.name]||0)+1;var g=v.subBuckets[p.name]=v.subBuckets[p.name]||{group:p.name,max:Number.MIN_VALUE,min:Number.MAX_VALUE};g.min=Math.min(g.min,h),g.max=Math.max(g.max,h)}f.push(v)}var x=c.filter(function(e){return!!s[e.name]});x.forEach(function(e){return e.percentage=s[e.name]/l.length});var b=Math.round(l.length/6);return{buckets:f,groups:x,max:l[l.length-1],median:o(l),min:l[0],project:e,twoThird:{max:l[l.length-b],min:l[b]}}}function i(e){var r=a(n(e)),t=[],i=!0,u=!1,l=void 0;try{for(var s,m=c()(e.projects);!(i=(s=m.next()).done);i=!0){var f=s.value;t.push(o(f,r))}}catch(d){u=!0,l=d}finally{try{!i&&m["return"]&&m["return"]()}finally{if(u)throw l}}return t}function u(e){var r=n(e);return f["default"].from(r.projects).inEnvironment(a,r).map(o)}var l=t(4),c=t.n(l),s=t(23),m=t.n(s),f=t(6);r.a=i,r.b=u}},[171])});
//# sourceMappingURL=example.parallel.js.map